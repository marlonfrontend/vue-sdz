import{n as e,S as t}from"./index.943c0929.js";import{S as s}from"./Index.e1b4f19b.js";import"./vendor.5affd582.js";import"./Index.04a1bb1e.js";var i=(e,t)=>e?t.split(e).length-1:0;const n={components:{SCollapsible:t,SInputContainer:s},directives:{"click-outside":{bind:function(e,t){const s=s=>{e.contains(s.target)||e===s.target||t.value(s)};e.__vueClickOutside__=s,document.addEventListener("click",s)},unbind:function(e){document.removeEventListener("click",e.__vueClickOutside__),e.__vueClickOutside__=null}}},mixins:[{data:()=>({pointer:-1}),methods:{pointerReset(){this.pointer=-1},pointerSet(e){this.pointer=e},pointerForward(){this.pointer<this.items.length-1&&this.pointer++},pointerBackward(){this.pointer>0&&this.pointer--},addPointerElement({key:e}="Enter"){this.items.length>0&&"Enter"===e&&(this.selected=this.pointer,this.$nextTick((()=>this.outside())))}}},{data:()=>({searchQuery:""}),computed:{searchableValue(){var e;return this.searchQuery?this.searchQuery:this.focused&&!this.searchQuery?"":this.value&&(null==(e=this.value)?void 0:e.length)||this.searchQuery?this.multiple?"":this.value:[this.placeholder]}},methods:{search({target:{value:e}}){this.isOpened=!0,this.focused=!1,this.searchQuery=e}}}],props:{tabindex:{type:Number,default:0},value:[String,Object,Number,Array],items:{type:Array,required:!0},placeholder:{type:String,default:"Selecione uma opção"},optionSelectPlaceholder:{type:String,default:"Press enter to select"},optionUnselectPlaceholder:{type:String,default:"Press enter to unselect"},required:Boolean,display:String,displayBy:String,validation:String,multiple:Boolean,hideSelected:Boolean,clearOnSelect:{type:Boolean,default:!0},disabled:Boolean},data:()=>({contentHeight:null,focused:!1,isOpened:!1}),computed:{error(){return this.items.some((e=>this.displayBy&&"object"==typeof e))?this.multiple&&!Array.isArray(this.value)?"Value must be a array":"":"You need to set displayBy."},containerClasses(){return["s-select",{"--is-opened":this.isOpened,"--is-disabled":this.disabled,"--has-error":this.error||this.validation,"--is-focused":this.focused||this.searchQuery,"--is-empty-search":this.searchQuery&&!this.options.length}]},selecteds(){if(!this.multiple||this.value&&!this.value.length)return[];return this.value.filter((e=>!!this.items.find((t=>t!==e)))).map((e=>this.display&&e[this.display]||e))},selected:{get(){if(this.disabled)return[];if(this.multiple)return this.selecteds;const e=this.items.find((e=>e===(Array.isArray(this.value)&&this.value&&this.displayBy&&this.value[this.displayBy])||this.value));return e?this.displayBy&&e[this.displayBy]?e[this.displayBy]?e[this.displayBy]:"":this.value:"Opção inválida"},set(e){if(e<0)return void this.outside();if("number"!=typeof e)return this.$emit("input",e),void this.outside();const t=this.hideSelected&&!this.searchQuery?this.hideSelecteds:this.searchQuery?this.options:this.items;if(!t.length)return!1;const s=t&&this.display&&t[e][this.display]||t[e];if(this.multiple){const i=e=>(this.display&&e[this.display]||e).toString(),n=e=>i(e)===s.toString();if(this.value.find(n)){this.outside();const e=e=>i(e)!==s.toString(),t=this.value.filter(e);this.$emit("input",t)}else this.outside(),this.$emit("input",[...this.value,t[e]])}else this.outside(),this.$emit("input",s)}},hideSelecteds(){return this.multiple&&Array.isArray(this.value)&&this.display?this.items.filter((e=>!this.selecteds.includes(e[this.display]))):[]},options(){if(this.error)return[];const e=this.hideSelected&&this.hideSelecteds||this.items;return this.searchQuery?e.filter((e=>{const t=this.displayBy&&e[this.displayBy]||e;return"string"==typeof t?i(this.searchQuery.toLowerCase(),t.toLowerCase()):i(this.searchQuery.toString().toLowerCase(),t.toString().toLowerCase())})):e}},methods:{itemClasses(e,t){return["item",{"-active":t===this.pointer,"-selected":this.isSelected(e,t)}]},openingHandler(){this.isOpened=!this.isOpened,this.setFocus()},escHandler(){this.isOpened&&this.outside()},removeSelected(e){const t=this.value.filter((t=>t!==this.value[e]));this.selected=t},isSelected(e){if(!this.selected)return!1;const t=this.display&&e[this.display]||e;if(this.multiple){const e=e=>(this.display&&e[this.display]||e).toString()===t.toString();return this.value.find((t=>e(t)))}return t===this.value},outside(){this.isOpened=!1,this.focused=!1,this.unsetFocus(),this.searchQuery="",this.pointerReset()},setFocus(){this.$refs.searchable.focus()},unsetFocus(){this.$refs.searchable.blur()}}},l={};var a=e(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("s-input-container",e._b({class:e.containerClasses,attrs:{validation:e.error||e.validation}},"s-input-container",e.$attrs,!1),[s("div",{staticClass:"select"},[s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.outside,expression:"outside"}],staticClass:"field",attrs:{tabindex:e.tabindex},on:{"!click":function(t){return e.openingHandler.apply(null,arguments)}}},[s("div",{staticClass:"selections"},[e._l(e.selecteds,(function(t,i){return s("span",{key:i,staticClass:"selected",on:{click:function(t){return e.removeSelected(i)}}},[e._v(" "+e._s(e.selecteds[i])+" ")])})),e.validation?e._e():s("input",{ref:"searchable",class:["input",{"-placeholder":e.selected===e.placeholder||!e.selected}],domProps:{value:e.searchableValue},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerForward.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerBackward.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.stopPropagation(),t.target!==t.currentTarget?null:e.addPointerElement.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.stopPropagation(),t.target!==t.currentTarget?null:e.escHandler.apply(null,arguments))}],"&keyup":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.escHandler.apply(null,arguments)},focus:function(t){e.focused=e.clearOnSelect},blur:function(t){e.focused=!1},input:e.search}})],2),s("i",{staticClass:"icon sdz-chevron-down"})]),s("div",{staticClass:"items"},[e._t("options",(function(){return[s("s-collapsible",{attrs:{"no-header":"",height:e.contentHeight,"is-opened":!(!e.isOpened||!e.options.length||e.validation)},on:{target:function(t){return e.contentHeight=50*t.childElementCount}}},e._l(e.options,(function(t,i){return s("div",{key:i,class:e.itemClasses(t,i),attrs:{"aria-hidden":"true"},on:{click:function(t){t.stopPropagation(),e.selected=i},mouseenter:function(t){return t.target!==t.currentTarget?null:e.pointerSet(i)}}},[e._t("option",(function(){return[s("div",{staticClass:"option-container"},[s("span",{staticClass:"text"},[e._v(e._s(e.displayBy&&t[e.displayBy]||t))]),s("span",{staticClass:"disclaimer"},[e._v(" "+e._s(e.isSelected(t,i)?e.optionUnselectPlaceholder:e.optionSelectPlaceholder)+" ")])])]}),{option:t})],2)})),0)]}),{options:e.options})],2)])])}),[],!1,r,null,null,null);function r(e){for(let t in l)this[t]=l[t]}const o={};var d=e({components:{SSelect:function(){return a.exports}()},data:()=>({data1:"",data2:"",data3:[{slug:"2",name:"coe2"}],data4:[],items:[{slug:"item 1",name:"name item 1"},{slug:"item 2",name:"name item 2"},{slug:"itemmmmmmmmmmmmmmmmmm 3",name:"name itemmmmmmmmmmmmmmmmmm 3"},{slug:"4",name:"name 4"},{slug:"5",name:"name 5"},{slug:"666666666666666666666666666666",name:"name 666666666666666666666666666666"}]})},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"s-select-example"},[s("s-select",{attrs:{label:"simple",display:"slug","display-by":"name",placeholder:"Selecione uma opção",items:e.items},model:{value:e.data1,callback:function(t){e.data1=t},expression:"data1"}}),s("s-select",{attrs:{label:"with slots",display:"slug","display-by":"name",placeholder:"Selecione uma opção","clear-on-select":"",items:e.items},scopedSlots:e._u([{key:"option",fn:function(t){var i=t.option;return s("div",{},[e._v(" "+e._s(i.slug)+" - "+e._s(i.name)+" ")])}}]),model:{value:e.data2,callback:function(t){e.data2=t},expression:"data2"}}),s("s-select",{attrs:{label:"multiple",display:"slug","display-by":"name",placeholder:"Selecione uma opção",multiple:"","hide-selected":"",items:e.items},model:{value:e.data3,callback:function(t){e.data3=t},expression:"data3"}}),s("s-select",{attrs:{label:"multiple with validation ( >=3 )",display:"slug","display-by":"name",placeholder:"Selecione uma opçãoooooooooooooooooo",validation:e.data4.length>=3?"Máximo de 3 opções selecionadas":"",multiple:"",items:e.items},model:{value:e.data4,callback:function(t){e.data4=t},expression:"data4"}}),s("s-select",{attrs:{label:"disabled",display:"slug","display-by":"name",placeholder:"Selecione uma opção",disabled:"",items:e.items}})],1)}),[],!1,u,null,null,null);function u(e){for(let t in o)this[t]=o[t]}var c=function(){return d.exports}();export{c as default};
