import{n as c}from"./index.c517d76c.js";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["s-pin"]},e._l(e.cells,function(o,r){return n("input",e._b({key:r,ref:"ref"+r,refInFor:!0,class:["input",{"--is-filled":o,"--has-error":e.hasError}],attrs:{type:"tel",pattern:"\\d*"},domProps:{value:o},on:{keydown:function(s){return s.stopPropagation(),e.onKeyDown.apply(null,arguments)},focus:function(s){return s.stopPropagation(),e.onFocus(+r)},input:function(s){return s.stopPropagation(),function(u){return e.onInput(u,+r)}.apply(null,arguments)}}},"input",e.$attrs,!1))}),0)},l=[];const f={name:"SPin",props:{size:{type:Number,default:4},hasError:Boolean},data(){return{cells:{},focusedIndex:0}},mounted(){this.cells=Array.from({length:this.size}).reduce((e,t,n)=>(e[n]="",e),{})},methods:{getRef(e){var n;const t=`ref${e}`;return(n=this.$refs[t])==null?void 0:n[0]},onInput(e,t){const n=+e.data,o=+t,s=["deleteContentBackward","deleteContentForward"].includes(e.inputType)||isNaN(n),u=this.getRef(o);u.value="",this.$forceUpdate(),this.cells[o]=s?"":n,this.$emit("update",this.cells),this.focusedIndex!==this.size-1&&this.onFocus(s?o:o+1)},onKeyDown({keyCode:e}){if([38,40].includes(e))return this.onFocus(this.focusedIndex);if(e===39)return this.focusNext();if(e===37)return this.focusPrevious()},onFocus(e){const t=this.getRef(e);t.focus(),setTimeout(()=>{t.setSelectionRange(2,2)},0),this.focusedIndex=+e},focusPrevious(){const e=this.focusedIndex?this.focusedIndex-1:this.focusedIndex;this.onFocus(e)},focusNext(){const e=this.focusedIndex===this.size-1?this.focusedIndex:this.focusedIndex+1;this.onFocus(e)}}},i={};var d=c(f,a,l,!1,p,null,null,null);function p(e){for(let t in i)this[t]=i[t]}var _=function(){return d.exports}();export{_ as default};
