import{n as h,c as d,d as p}from"./index.7c0e5682.js";import{c as f}from"./clickOutside.84c04b54.js";import"./vendor.0f0055ec.js";const y={data(){return{pointer:-1}},methods:{pointerReset(){this.pointer=-1},pointerSet(e){this.pointer=e},pointerForward(){this.pointer<this.items.length-1&&this.pointer++},pointerBackward(){this.pointer>0&&this.pointer--},addPointerElement({key:e}="Enter"){this.items.length>0&&e==="Enter"&&(this.selected=this.pointer,this.$nextTick(()=>this.outside()))}}},m={data(){return{searchQuery:""}},computed:{searchableValue(){var e;return this.searchQuery?this.searchQuery:this.focused&&!this.searchQuery?"":(!this.value||!((e=this.value)==null?void 0:e.length))&&!this.searchQuery?[this.placeholder]:this.multiple?"":this.value}},methods:{search({target:{value:e}}){this.isOpened=!0,this.focused=!1,this.searchQuery=e}}};var a=(e,s)=>e?s.split(e).length-1:0,g=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("s-input-container",e._b({class:e.containerClasses},"s-input-container",e.$attrs,!1),[i("div",{staticClass:"select"},[i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.outside,expression:"outside"}],staticClass:"field",attrs:{tabindex:e.tabindex},on:{"!click":function(t){return e.openingHandler.apply(null,arguments)}}},[i("div",{staticClass:"selections"},[e._l(e.selecteds,function(t,r){return i("span",{key:r,staticClass:"selected",on:{click:function(n){return e.removeSelected(r)}}},[e._v(" "+e._s(e.selecteds[r])+" ")])}),i("input",{ref:"searchable",class:["input",{"-placeholder":e.selected===e.placeholder||!e.selected}],domProps:{value:e.searchableValue},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerForward.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerBackward.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||(t.stopPropagation(),t.target!==t.currentTarget)?null:e.addPointerElement.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||(t.stopPropagation(),t.target!==t.currentTarget)?null:e.escHandler.apply(null,arguments)}],"&keyup":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.escHandler.apply(null,arguments)},focus:function(t){e.focused=e.clearOnSelect},blur:function(t){e.focused=!1},input:e.search}})],2),i("i",{staticClass:"icon sdz-chevron-down"})]),i("div",{staticClass:"items"},[e._t("options",function(){return[i("s-collapsible",{attrs:{"no-header":"",height:e.contentHeight,"is-opened":!!(e.isOpened&&e.options.length)},on:{target:function(t){return e.contentHeight=t.childElementCount*50}}},e._l(e.options,function(t,r){return i("div",{key:r,class:e.itemClasses(t,r),attrs:{"aria-hidden":"true"},on:{click:function(n){n.stopPropagation(),e.selected=r},mouseenter:function(n){return n.target!==n.currentTarget?null:e.pointerSet(r)}}},[e._t("option",function(){return[i("div",{staticClass:"option-container"},[i("span",{staticClass:"text"},[e._v(e._s(e.displayBy&&t[e.displayBy]||t))]),i("span",{staticClass:"disclaimer"},[e._v(" "+e._s(e.isSelected(t,r)?e.optionUnselectPlaceholder:e.optionSelectPlaceholder)+" ")])])]},{option:t})],2)}),0)]},{options:e.options})],2)])])},_=[];const k={components:{SCollapsible:d,SInputContainer:p},directives:f,mixins:[y,m],props:{tabindex:{type:Number,default:0},value:[String,Object,Number,Array],items:{type:Array,required:!0},placeholder:{type:String,default:"Selecione uma op\xE7\xE3o"},optionSelectPlaceholder:{type:String,default:"Press enter to select"},optionUnselectPlaceholder:{type:String,default:"Press enter to unselect"},required:Boolean,display:String,displayBy:String,multiple:Boolean,hideSelected:Boolean,clearOnSelect:{type:Boolean,default:!0},disabled:Boolean},data(){return{contentHeight:null,focused:!1,isOpened:!1}},computed:{error(){return this.items.some(e=>this.displayBy&&typeof e=="object")?this.multiple&&!Array.isArray(this.value)?"Value must be a array":"":"You need to set displayBy."},containerClasses(){return["s-select",{"--is-opened":this.isOpened,"--is-disabled":this.disabled,"--is-focused":this.focused||this.searchQuery,"--is-empty-search":this.searchQuery&&!this.options.length}]},selecteds(){return!this.multiple||this.value&&!this.value.length?[]:this.value.filter(s=>!!this.items.find(i=>i!==s)).map(s=>this.display&&s[this.display]||s)},selected:{get(){if(this.disabled)return[];if(this.multiple)return this.selecteds;const e=this.items.find(s=>s===(Array.isArray(this.value)&&this.value&&this.displayBy&&this.value[this.displayBy])||this.value);return e?this.displayBy&&e[this.displayBy]?e[this.displayBy]?e[this.displayBy]:"":this.value:"Op\xE7\xE3o inv\xE1lida"},set(e){if(e<0){this.outside();return}if(typeof e!="number"){this.$emit("input",e),this.outside();return}const s=this.hideSelected&&!this.searchQuery?this.hideSelecteds:this.searchQuery?this.options:this.items;if(!s.length)return!1;const i=s&&this.display&&s[e][this.display]||s[e];if(this.multiple){const t=l=>(this.display&&l[this.display]||l).toString(),r=l=>t(l)===i.toString();if(!this.value.find(r))this.outside(),this.$emit("input",[...this.value,s[e]]);else{this.outside();const l=c=>t(c)!==i.toString(),u=this.value.filter(l);this.$emit("input",u)}}else this.outside(),this.$emit("input",i)}},hideSelecteds(){return this.multiple&&Array.isArray(this.value)&&this.display?this.items.filter(e=>!this.selecteds.includes(e[this.display])):[]},options(){if(this.error)return[];const e=this.hideSelected&&this.hideSelecteds||this.items;return this.searchQuery?e.filter(s=>{const i=this.displayBy&&s[this.displayBy]||s;return typeof i=="string"?a(this.searchQuery.toLowerCase(),i.toLowerCase()):a(this.searchQuery.toString().toLowerCase(),i.toString().toLowerCase())}):e}},methods:{itemClasses(e,s){return["item",{"-active":s===this.pointer,"-selected":this.isSelected(e,s)}]},openingHandler(){this.isOpened=!this.isOpened,this.setFocus()},escHandler(){this.isOpened&&this.outside()},removeSelected(e){const s=this.value.filter(i=>i!==this.value[e]);this.selected=s},isSelected(e){if(!this.selected)return!1;const s=this.display&&e[this.display]||e;if(this.multiple){const i=t=>(this.display&&t[this.display]||t).toString()===s.toString();return this.value.find(t=>i(t))}return s===this.value},outside(){this.isOpened=!1,this.focused=!1,this.unsetFocus(),this.searchQuery="",this.pointerReset()},setFocus(){this.$refs.searchable.focus()},unsetFocus(){this.$refs.searchable.blur()}}},o={};var v=h(k,g,_,!1,S,null,null,null);function S(e){for(let s in o)this[s]=o[s]}var O=function(){return v.exports}();export{O as default};
