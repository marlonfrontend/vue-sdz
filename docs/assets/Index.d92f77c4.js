import{n as c}from"./index.c4d66450.js";import"./vendor.0f0055ec.js";var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["s-pin"]},e._l(e.cells,function(n,r){return s("input",e._b({key:r,ref:"ref"+r,refInFor:!0,class:["input",{"--is-filled":n,"--has-error":e.hasError}],attrs:{type:"tel",pattern:"\\d*"},domProps:{value:n},on:{keydown:function(o){return o.stopPropagation(),e.onKeyDown.apply(null,arguments)},focus:function(o){return o.stopPropagation(),e.onFocus(+r)},input:function(o){return o.stopPropagation(),function(u){return e.onInput(u,+r)}.apply(null,arguments)}}},"input",e.$attrs,!1))}),0)},f=[];const a={name:"SPin",props:{size:{type:Number,default:4},hasError:Boolean},data(){return{cells:{},focusedIndex:0}},mounted(){this.cells=Array.from({length:this.size}).reduce((e,t,s)=>(e[s]="",e),{})},methods:{getRef(e){var s;const t=`ref${e}`;return(s=this.$refs[t])==null?void 0:s[0]},onInput(e,t){const s=+e.data,n=+t,r=this.size-1===n;if(this.cells[n]="",this.cells[n]&&r||!s){const o=this.getRef(n);o.value="",this.cells[n]="";return}this.$forceUpdate(),this.cells[n]=s,this.focusedIndex!==this.size-1&&this.onFocus(n+1)},onKeyDown({keyCode:e}){if([38,40].includes(e))return this.onFocus(this.focusedIndex);if(e===39)return this.focusNext();if(e===37)return this.focusPrevious()},onFocus(e){const t=this.getRef(e);t.focus(),setTimeout(()=>{t.setSelectionRange(2,2)},0),this.focusedIndex=+e},focusPrevious(){const e=this.focusedIndex?this.focusedIndex-1:this.focusedIndex;this.onFocus(e)},focusNext(){const e=this.focusedIndex===this.size-1?this.focusedIndex:this.focusedIndex+1;this.onFocus(e)}}},i={};var d=c(a,l,f,!1,h,null,null,null);function h(e){for(let t in i)this[t]=i[t]}var v=function(){return d.exports}();export{v as default};
