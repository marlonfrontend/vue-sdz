var y=Object.defineProperty,b=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var g=(t,s,e)=>s in t?y(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,l=(t,s)=>{for(var e in s||(s={}))k.call(s,e)&&g(t,e,s[e]);if(d)for(var e of d(s))P.call(s,e)&&g(t,e,s[e]);return t},h=(t,s)=>b(t,$(s));import w from"./Index.88d4924e.js";import{n as p}from"./index.1af000d2.js";import"./vendor.0f0055ec.js";var S=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"filters"},[e("input",t._b({staticClass:"filter",domProps:{value:t.search},on:{input:function(a){return t.$emit("filter",a.target.value)}}},"input",t.$attrs,!1))])},C=[];const x={name:"Filters",props:{search:{type:String,required:!0}}},_={};var T=p(x,S,C,!1,A,null,null,null);function A(t){for(let s in _)this[s]=_[s]}var j=function(){return T.exports}(),F=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pagination"},[t._t("pagination",function(){return[e("div",{staticClass:"pages"},[e("span",{staticClass:"first",on:{click:function(a){return t.$emit("to-first")}}},[t._v("\xAB")]),t._l(t.pages,function(a,n){return e("button",{key:n+"\u2026",class:["page",{"-page":n+1===t.page}],on:{click:function(i){return t.$emit("change-page",a)}}},[t._v(" "+t._s(a.handler||a.page)+" ")])}),e("span",{staticClass:"last",on:{click:function(a){return t.$emit("to-last")}}},[t._v("\xBB")])],2)]},{pages:t.pages})],2)},E=[];const L={name:"Pagination",props:{pages:{type:Array,required:!0},page:{type:Number,required:!0}}},f={};var N=p(L,F,E,!1,I,null,null,null);function I(t){for(let s in f)this[s]=f[s]}var q=function(){return N.exports}();const B={created(){this.cols.forEach(t=>{typeof t!="object"&&console.error("the array of columns must contain only objects")}),this.rows.forEach(t=>{typeof t!="object"&&console.error("the array of rows must contain only objects")}),this.paginable&&!!this.maxHeight&&console.warn("pagination can not have a maxHeight property")},computed:{hasValid(){return!(this.cols||this.$scopedSlots.col)&&!(this.dataTable||this.$scopedSlots.row)?(console.error("you must set the array of columns and rows"),!1):this.cols||this.$scopedSlots.col?this.dataTable||this.$scopedSlots.row?!0:(console.error("you must set the array of rows"),!1):(console.error("you must set the array of columns"),!1)}}},M={props:{sortable:Boolean},watch:{page(){this.iconToSort="\u25BC"}},methods:{$handlerSort(t){this.iconToSort==="\u25BC"?this.iconToSort="\u25B2":this.iconToSort="\u25BC",this.$emit("sort",{item:t,type:this.iconToSort==="\u25BC"?"decrease":"increase"})}}},R={props:{selectable:Boolean},data(){return{checkeds:[],allChecked:!1}},methods:{$selected(t){this.$emit("selected",t)},$selectedAll(){this.allChecked?(this.allChecked=!1,this.checkeds=[],this.$emit("reset-all")):(this.allChecked=!0,this.checkeds=this.rows,this.$emit("selected-all",{page:this.rows,table:this.rows}))}}},H={props:{paginable:Boolean,paginationType:{type:String,validator:t=>["full","ellipsised"].includes(t),default:"full"},paginate:{type:Object,default:()=>({})},currentPage:{type:[Number,String],validator:t=>!!t,default:1},perPage:{type:[Number,String],validator:t=>t>2,default:10},pagesLimit:{type:[Number,String],validator:t=>t>3}},data(){return{page:this.currentPage}},watch:{search(t,s){this.paginable&&(t!==s&&(this.page=1),t||(this.page=this.currentPage))}},computed:{pagination(){const t=this.rows,s=t.slice((this.page-1)*this.perPage,this.perPage*this.page),e=(this.page-1)*this.perPage+1,a=(this.page-1)*this.perPage+s.length;return h(l(h(l({data:s},this.page),{from:e}),this.perPage),{to:a,total:t.length})},totalPaged(){const t=this.search?this.pagination.total:this.rows.length;return Math.ceil(t/this.perPage)},pages(){const t=this.rows.slice(0,this.pagesLimit||this.totalPaged);return Array.from({length:t.length},(s,e)=>({page:e+1,handler:this.paginationType==="ellipsised"&&this.calcPages(e)}))}},methods:{calcPages(t){const s=t+1,e=t+3<=this.page;if(s===2&&e)return"\u2039";const a=s===(this.pagesLimit||this.totalPaged)-1,n=this.page<=(this.pagesLimit-3||this.totalPaged-3)&&"\u203A";if(a&&n)return"\u203A"},toFirst(){this.page=1},changePage({page:t,handler:s}){s==="\u2039"?this.page-=2:s==="\u203A"?this.page+=2:this.page=t},toLast(){this.page=this.totalPaged}}};var z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.hasValid?e("div",{staticClass:"s-table"},[t._t("actions",function(){return[e("filters",t._g({attrs:{label:"Filtrar por: ",search:t.search}},t.$listeners))]}),t.isEmpty?e("div",[t._v(" EMPTY STATE ")]):e("div",{staticClass:"table-container"},[e("table",{staticClass:"table"},[e("thead",{staticClass:"thead"},[e("tr",{staticClass:"tr-col"},[t.selectable?e("th",{staticClass:"th-col-selectable"},[e("input",{attrs:{type:"checkbox"},on:{click:t.$selectedAll}})]):t._e(),t._t("col",function(){return t._l(t.cols,function(a,n){var i=a.label,r=a.row;return e("th",{key:n,staticClass:"th-col"},[t._t("icon-sortable",function(){return[t.sortable?e("span",{staticClass:"icon-sortable-all",on:{click:function(c){return t.$handlerSort(r)}}},[t._v(" "+t._s(t.iconToSort)+" ")]):t._e()]}),e("span",[t._v(t._s(i))])],2)})},{cols:t.cols})],2)]),e("s-shadowed",{attrs:{"has-bottom-shadow":!1}},[e("tbody",{ref:"tbody",staticClass:"tbody"},t._l(t.rows,function(a,n){return e("tr",{key:n,staticClass:"tr-row"},[t.selectable?e("td",{staticClass:"td-row-selectable"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkeds,expression:"checkeds"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(t.checkeds)?t._i(t.checkeds,a)>-1:t.checkeds},on:{change:[function(i){var r=t.checkeds,c=i.target,m=!!c.checked;if(Array.isArray(r)){var u=a,o=t._i(r,u);c.checked?o<0&&(t.checkeds=r.concat([u])):o>-1&&(t.checkeds=r.slice(0,o).concat(r.slice(o+1)))}else t.checkeds=m},function(i){return t.$selected(a)}]}})]):t._e(),t._t("row",function(){return t._l(t.cols.length,function(i,r){return e("td",{key:r,ref:"",refInFor:!0,staticClass:"td-row"},[e("span",{staticClass:"row"},[t._v(t._s(t.getRow(a,r)))])])})},{rows:a,cols:t.cols})],2)}),0)]),t._t("tfoot")],2),t.paginable?e("pagination",{attrs:{pages:t.pages,page:t.page},on:{"to-first":t.toFirst,"change-page":t.changePage,"to-last":t.toLast}}):t._e()],1)],2):e("div",{staticClass:"empty-state"},[t._t("empty",function(){return[t._v(" error: invalid table! ")]})],2)},O=[];const V={name:"STable",components:{SShadowed:w,Pagination:q,Filters:j},mixins:[B,M,R,H],props:{cols:{type:Array,required:!0},rows:{type:Array,required:!0},search:String,searchParams:{type:Array}},data(){return{iconToSort:"\u25BC"}},computed:{isEmpty(){return!this.pages.length&&this.search},dataTable(){return this.paginable?this.pagination.data:this.rows}},methods:{getRow(t,s){const e=this.cols.map(({row:a})=>a);return t[e[s]]||""}}},v={};var Y=p(V,z,O,!1,D,null,null,null);function D(t){for(let s in v)this[s]=v[s]}var U=function(){return Y.exports}();export{U as default};
