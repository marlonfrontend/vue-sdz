import{n as c}from"./index.e50009ab.js";const l=({parentElement:t})=>t?[t,...l(t)]:[],s=(t,e)=>typeof e=="string"&&t.indexOf(e)>-1,h={name:"SPopover",props:{target:{type:[Object,Element]},arrowSpacing:{type:[Number,String],default:15},elementSpacing:{type:[Number,String],default:0},position:{type:String,default:"bottom",validator:t=>s(["bottom","top"],t)},align:{type:String,default:"center",validator:t=>s(["right","center","left"],t)},selector:String},data(){return{coordinates:{},observer:{}}},watch:{target:{handler:"setPosition",immediate:!0}},mounted(){const t=this.$el,e={attributes:!0,attributeFilter:["style"]},i=r=>{for(const a of r)a.type==="attributes"&&this.setPosition()};this.observer=new MutationObserver(i),this.observer.observe(t,e);const o=this.selector?document.querySelector(this.selector):window;window.addEventListener("click",this.emissionHandler),window.addEventListener("resize",this.setPosition),document.addEventListener("keydown",this.clickEscape,!0),o.addEventListener("scroll",this.setPosition)},computed:{boxShadow(){return{"--box-shadow":this.position==="bottom"?"-1px -1px 6px -1.5px rgba(0, 0, 0, 0.2)":"2px 2px 2px 0.5px rgba(0, 0, 0, 0.2)"}},arrowAlignment(){return this.align==="left"?{"--right":`${this.arrowSpacing}px`}:this.align==="right"?{"--left":`${this.arrowSpacing}px`}:{"--left":`calc(50% - ${this.arrowSpacing/2}px)`}},arrowBorder(){const t="white",e="transparent",o=this.position==="top"&&t||e;return{"--border-bottom-color":o,"--border-right-color":o,"--border-left-color":o,"--border-top-color":o}},style(){return{...this.coordinates,...this.arrowAlignment,...this.arrowPosition,...this.arrowBorder,...this.boxShadow}}},methods:{setPosition(){!this.target||this.$nextTick(()=>{const t=this.$el.getBoundingClientRect(),e=this.target.hasOwnProperty("$el")?this.target.$el.getBoundingClientRect():this.target.getBoundingClientRect();let i=this.position==="top"?e.top-(8+t.height)-this.elementSpacing:e.top+(8+e.height)+this.elementSpacing,o=e.left+e.width/2;this.align==="left"&&(o=o-t.width+20),this.align==="right"&&(o=o-20),this.align==="center"&&(o=o-t.width/2),this.coordinates={top:i+"px",left:o+"px"};const r=this.position==="bottom"?"-5":t.height-5;this.arrowPosition={"--top":r+"px"}})},emissionHandler(t){if(!this.target)return;const e=t.target?[t.target,...l(t.target)]:[],i=e.includes(this.target.$el),o=!e.includes(this.$el);!i&&o&&this.$emit("handler")},clickEscape(t){(t.key==="Escape"||t.keyCode===27)&&this.$emit("handler")}},beforeDestroy(){const t=this.selector?document.querySelector(this.selector):window;window.removeEventListener("click",this.emissionHandler),window.removeEventListener("resize",this.setPosition),document.removeEventListener("keydown",this.clickEscape,!0),t.removeEventListener("scroll",this.getPosition),this.observer.disconnect()},render(t){return t("div",{staticClass:"s-popover",class:{"-bottom":!this.target},style:this.style},this.$slots.default)}};let d,p;const n={};var g=c(h,d,p,!1,u,null,null,null);function u(t){for(let e in n)this[e]=n[e]}const w=function(){return g.exports}();export{w as S};
