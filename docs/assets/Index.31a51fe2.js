import{n as o,c as u,d as c}from"./index.c4d66450.js";import{c as p}from"./clickOutside.84c04b54.js";import"./vendor.0f0055ec.js";const d={data(){return{pointer:-1}},methods:{pointerReset(){this.pointer=-1},pointerSet(e){this.pointer=e},pointerForward(){this.pointer<this.options.length-1&&this.pointer++},pointerBackward(){this.pointer>0&&this.pointer--},addPointerElement({key:e}="Enter"){var s;if(((s=this.options)==null?void 0:s.length)&&e==="Enter"){const i=this.pointer,t=this.options.find((r,n)=>n===i);this.selected={option:t,index:i},this.$nextTick(()=>this.outside())}}}},h={data(){return{searchQuery:""}},methods:{onSearch({target:{value:e}}){this.isOpened=!0,this.focused=!1,this.searchQuery=e}}};var a=(e,s)=>e?s.split(e).length-1:0,f=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("s-input-container",e._b({class:e.containerClasses},"s-input-container",e.$attrs,!1),[i("div",{staticClass:"select"},[i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.outside,expression:"outside"}],staticClass:"field",attrs:{tabindex:e.tabindex},on:{"!click":function(t){return e.openingHandler.apply(null,arguments)}}},[i("div",{staticClass:"selections"},[e._l(e.values,function(t,r){return i("span",{key:r,staticClass:"selected",on:{click:function(n){return n.stopPropagation(),e.removeSelected(r)}}},[e._v(" "+e._s(e.values[r])+" ")])}),i("input",{ref:"searchable",class:["input",{"--placeholder":!e.value&&!e.searchQuery&&e.placeholder}],attrs:{placeholder:e.placeholder},domProps:{value:e.searchQuery||e.value[e.displayBy]},on:{input:e.onSearch,"&keyup":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.escHandler.apply(null,arguments)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||(t.stopPropagation(),t.target!==t.currentTarget)?null:e.escHandler.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerBackward.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerForward.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||(t.stopPropagation(),t.target!==t.currentTarget)?null:e.addPointerElement.apply(null,arguments)}]}})],2),i("i",{staticClass:"icon sdz-chevron-down"})]),i("div",{staticClass:"items"},[e._t("options",function(){return[i("s-collapsible",{attrs:{"no-header":"",height:e.contentHeight,"is-opened":!!(e.isOpened&&e.options.length)},on:{target:function(t){return e.contentHeight=t.childElementCount*50}}},e._l(e.options,function(t,r){return i("div",{key:r,class:e.itemClasses(t,r),attrs:{"aria-hidden":"true"},on:{click:function(n){n.stopPropagation(),e.selected={option:t,index:r}},mouseenter:function(n){return n.target!==n.currentTarget?null:e.pointerSet(r)}}},[e._t("option",function(){return[i("div",{staticClass:"option-container"},[i("span",{staticClass:"text"},[e._v(e._s(t[e.displayBy]))]),i("span",{staticClass:"disclaimer"},[e._v(" "+e._s(e.isSelected(t,r)?e.optionUnselectPlaceholder:e.optionSelectPlaceholder)+" ")])])]},{option:t})],2)}),0)]},{options:e.options})],2)])])},y=[];const m={components:{SCollapsible:u,SInputContainer:c},directives:p,mixins:[d,h],props:{value:[Object,Array],items:{type:Array,required:!0},tabindex:{type:Number,default:0},trackBy:{type:String,required:!0},displayBy:{type:String,required:!0},multiple:Boolean,disabled:Boolean,placeholder:String,hideSelected:Boolean,optionSelectPlaceholder:String,optionUnselectPlaceholder:String},data(){return{isOpened:!1,contentHeight:null}},computed:{error(){return this.trackBy?this.multiple&&!Array.isArray(this.value)?"Value must be a array":this.items.some(e=>typeof e=="object")?"":"You need to set displayBy.":"You need to set trackBy."},containerClasses(){var e;return["s-select",{"--is-opened":this.isOpened,"--is-disabled":this.disabled,"--is-empty-search":this.searchQuery&&!((e=this.options)==null?void 0:e.length)}]},values(){var e;return!this.multiple||!((e=this.value)==null?void 0:e.length)?[]:this.value.map(s=>s[this.displayBy])},options(){return this.error?[]:this.searchQuery?this.items.filter(e=>{const s=e[this.displayBy];return typeof s=="string"?a(this.searchQuery.toLowerCase(),s.toLowerCase()):a(this.searchQuery.toString().toLowerCase(),s.toString().toLowerCase())}):this.items},selected:{get(){if(this.disabled)return[];if(this.multiple)return this.values;const e=this.items.find(s=>s===this.value[this.displayBy]);return e?e[this.displayBy]?this.value:"":"Op\xE7\xE3o inv\xE1lida"},set({option:e,index:s}){var i;if(s<0)return this.outside();if(!!((i=this.options)==null?void 0:i.length)){if(!this.multiple)return this.emitInput(this.isSelected(e)?{}:e);if(!this.isSelected(e))return this.emitInput([...this.value,e]);this.emitInput(this.value.filter(t=>!this.isEqual(t,e)))}}}},methods:{itemClasses(e,s){return["item",{"--active":s===this.pointer,"--selected":this.isSelected(e)}]},openingHandler(){this.isOpened=!this.isOpened,this.setFocus()},escHandler(){this.isOpened&&this.outside()},emitInput(e){this.outside(),this.$emit("input",e)},removeSelected(e){this.emitInput(this.value.filter((s,i)=>!Object.is(i,e)))},isEqual(e,s){return(e==null?void 0:e[this.trackBy])===(s==null?void 0:s[this.trackBy])},isSelected(e){return this.multiple?this.value.some(s=>this.isEqual(s,e)):this.isEqual(this.value,e)},outside(){this.isOpened=!1,this.focused=!1,this.unsetFocus(),this.searchQuery="",this.pointerReset()},setFocus(){this.$refs.searchable.focus()},unsetFocus(){this.$refs.searchable.blur()}}},l={};var g=o(m,f,y,!1,_,null,null,null);function _(e){for(let s in l)this[s]=l[s]}var b=function(){return g.exports}();export{b as default};
